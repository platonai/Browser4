<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM Events - Frames Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .frame-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .frame-wrapper {
            flex: 1;
            border: 2px solid #ddd;
            border-radius: 4px;
            padding: 10px;
        }
        iframe {
            width: 100%;
            height: 200px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            margin: 5px;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            background: #007bff;
            color: white;
            cursor: pointer;
        }
        button:hover { background: #0056b3; }
        .remove-btn { background: #dc3545; }
        .remove-btn:hover { background: #c82333; }
        .navigate-btn { background: #28a745; }
        .navigate-btn:hover { background: #218838; }
        #output {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #dee2e6;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DOM Events - Frames Test</h1>
        <p>This page tests frame attachment, detachment, and navigation events.</p>

        <h3>Frame Controls</h3>
        <button onclick="createFrame()">Create Frame</button>
        <button onclick="createNamedFrame()">Create Named Frame</button>
        <button onclick="createNestedFrame()">Create Nested Frame</button>
        <button onclick="removeAllFrames()" class="remove-btn">Remove All Frames</button>

        <h3>Frame Navigation</h3>
        <button onclick="navigateFrames()" class="navigate-btn">Navigate All Frames</button>
        <button onclick="navigateFrame('frame1')" class="navigate-btn">Navigate Frame 1</button>
        <button onclick="navigateFrame('frame2')" class="navigate-btn">Navigate Frame 2</button>

        <h3>Active Frames</h3>
        <div id="framesContainer" class="frame-container">
            <!-- Frames will be dynamically added here -->
        </div>

        <div id="output"></div>
    </div>

    <script>
        let frameCount = 0;

        function createFrame() {
            frameCount++;
            const frameId = 'frame' + frameCount;
            const wrapper = document.createElement('div');
            wrapper.className = 'frame-wrapper';
            wrapper.id = 'wrapper-' + frameId;

            const title = document.createElement('h4');
            title.textContent = 'Frame ' + frameCount;

            const frame = document.createElement('iframe');
            frame.id = frameId;
            frame.src = '/generated/interactive-1.html';

            const removeBtn = document.createElement('button');
            removeBtn.textContent = 'Remove';
            removeBtn.className = 'remove-btn';
            removeBtn.onclick = () => removeFrame(frameId);

            wrapper.appendChild(title);
            wrapper.appendChild(frame);
            wrapper.appendChild(removeBtn);

            document.getElementById('framesContainer').appendChild(wrapper);

            appendOutput('Frame created: ' + frameId);
        }

        function createNamedFrame() {
            frameCount++;
            const frameName = 'myFrame' + frameCount;
            const wrapper = document.createElement('div');
            wrapper.className = 'frame-wrapper';

            const title = document.createElement('h4');
            title.textContent = 'Named Frame: ' + frameName;

            const frame = document.createElement('iframe');
            frame.name = frameName;
            frame.src = '/generated/interactive-2.html';

            wrapper.appendChild(title);
            wrapper.appendChild(frame);
            document.getElementById('framesContainer').appendChild(wrapper);

            appendOutput('Named frame created: ' + frameName);
        }

        function createNestedFrame() {
            frameCount++;
            const wrapper = document.createElement('div');
            wrapper.className = 'frame-wrapper';

            const title = document.createElement('h4');
            title.textContent = 'Nested Frame Set ' + frameCount;

            // Create a frameset-like structure using iframes
            const parentFrame = document.createElement('iframe');
            parentFrame.srcdoc = `
                <!DOCTYPE html>
                <html>
                <head><title>Parent Frame</title></head>
                <body>
                    <h3>Parent Frame</h3>
                    <iframe src="/generated/interactive-3.html" width="100%" height="150"></iframe>
                </body>
                </html>
            `;
            parentFrame.style.height = '200px';

            wrapper.appendChild(title);
            wrapper.appendChild(parentFrame);
            document.getElementById('framesContainer').appendChild(wrapper);

            appendOutput('Nested frame structure created');
        }

        function removeFrame(frameId) {
            const wrapper = document.getElementById('wrapper-' + frameId);
            if (wrapper) {
                wrapper.remove();
                appendOutput('Frame removed: ' + frameId);
            }
        }

        function removeAllFrames() {
            const container = document.getElementById('framesContainer');
            const frameCount = container.children.length;
            container.innerHTML = '';
            appendOutput('All frames removed (' + frameCount + ' frames)');
        }

        function navigateFrames() {
            const frames = document.getElementsByTagName('iframe');
            for (let i = 0; i < frames.length; i++) {
                try {
                    frames[i].src = '/generated/interactive-' + ((i % 4) + 1) + '.html';
                } catch (e) {
                    console.error('Error navigating frame:', e);
                }
            }
            appendOutput('Navigated ' + frames.length + ' frames');
        }

        function navigateFrame(frameName) {
            const frame = document.getElementsByName(frameName)[0] || document.getElementById(frameName);
            if (frame) {
                frame.src = '/generated/interactive-4.html';
                appendOutput('Navigated frame: ' + frameName);
            } else {
                appendOutput('Frame not found: ' + frameName);
            }
        }

        function appendOutput(text) {
            const output = document.getElementById('output');
            output.textContent += new Date().toLocaleTimeString() + ' - ' + text + '\n';
            output.scrollTop = output.scrollHeight;
        }

        // Log initial message
        console.log('DOM Events Frames Test Page Loaded');
        appendOutput('Page loaded - ready for frame testing');
    </script>
</body>
</html>